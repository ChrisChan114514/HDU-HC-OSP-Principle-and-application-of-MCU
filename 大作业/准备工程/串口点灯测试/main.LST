C51 COMPILER V9.54   MAIN                                                                  05/31/2025 11:11:08 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: D:\Keil5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND TABS(2)

line level    source

   1          #include <REGX52.H>
   2          
   3          // LEDµÆµÄ¶¨Òå
   4          #define LED P2_0
   5          unsigned char led_state = 1;    // LEDµÆ×´Ì¬£¬0ÎªÃð£¬1ÎªÁÁ
   6          unsigned char received_chars[3] = {0}; // ´æ´¢×î½ü½ÓÊÕµÄ3¸ö×Ö·û
   7          unsigned char char_count = 0;   // ½ÓÊÕµ½µÄ×Ö·û¼ÆÊý
   8          
   9          // ÅäÖÃ´®¿ÚÍ¨ÐÅ³õÊ¼»¯
  10          void uart_init(unsigned int baud)
  11          {
  12   1        TMOD |= 0X20; // ÉèÖÃ¼ÆÊýÆ÷¹¤×÷·½Ê½2
  13   1        SCON = 0X50; // ÉèÖÃÎª¹¤×÷·½Ê½1
  14   1        PCON = 0X80; // ²¨ÌØÂÊ¼Ó±¶
  15   1        TH1 = baud; // ¼ÆÊýÆ÷³õÊ¼ÖµÉèÖÃ
  16   1        TL1 = baud;
  17   1      
  18   1        // ÅäÖÃÖÐ¶ÏÆ÷
  19   1        ES = 1; // ´ò¿ª½ÓÊÕÖÐ¶Ï
  20   1        EA = 1; // ´ò¿ª×ÜÖÐ¶Ï
  21   1        TR1 =1 ; // ´ò¿ª¼ÆÊýÆ÷    
  22   1      }
  23          // ÉÏÃæ´úÂëÀí½â×îºÃ£¬ÆäÊµÕæÕýÊ¹ÓÃµÄÊ±ºòÎÒÃÇÍùÍù¶¼ÊÇ¸´ÖÆÕ³Ìù£¬È»ºóÐÞ¸ÄÒ»Ð©²ÎÊý£¬±ÈÈç²¨ÌØÂÊ£¬Êý¾ÝÎ»£¬Ð£ÑéÎ»µ
             -ÈµÈ¡£
  24          
  25          // ´®¿ÚÍ¨ÐÅÖÐ¶Ïº¯Êý
  26          void uart() interrupt 4
  27          {
  28   1        unsigned int rec_data; // ½ÓÊÕµ½µÄÊý¾Ý
  29   1                            
  30   1        RI = 0; // Çå³ý½ÓÊÕÖÐ¶Ï±êÖ¾Î»
  31   1      
  32   1        rec_data = SBUF; // ´æ´¢½ÓÊÕµ½µÄÊý¾Ý
  33   1        SBUF = rec_data; // ½«½ÓÊÕµ½µÄÊý¾Ý·ÅÈëµ½·¢ËÍ¼Ä´æÆ÷
  34   1        
  35   1        // ´æ´¢×î½üÊÕµ½µÄ3¸ö×Ö·û
  36   1        received_chars[0] = received_chars[1];
  37   1        received_chars[1] = received_chars[2];
  38   1        received_chars[2] = rec_data;
  39   1        char_count++;
  40   1        
  41   1        // ¼ì²éÊÇ·ñÊÕµ½Èý¸ö'1'
  42   1        if (char_count >= 3 && received_chars[0] == '1' && received_chars[1] == '1' && received_chars[2] == '1') 
             -{
  43   2          // ÇÐ»»LED×´Ì¬
  44   2          led_state = !led_state;
  45   2          LED = !led_state;  // LEDµÍµçÆ½µãÁÁ
  46   2          // ÖØÖÃ¼ÆÊýÆ÷
  47   2          char_count = 0;
  48   2        }
  49   1      
  50   1        while(!TI); // µÈ´ý·¢ËÍÊý¾ÝÍê³É
  51   1        TI = 0; // Çå³ý·¢ËÍÍê³É±êÖ¾Î»       
  52   1      }
  53          
C51 COMPILER V9.54   MAIN                                                                  05/31/2025 11:11:08 PAGE 2   

  54          void main()
  55          { 
  56   1        uart_init(0XFA); // ²¨ÌØÂÊÎª9600
  57   1        
  58   1        // ³õÊ¼»¯LED×´Ì¬
  59   1        LED = 0;  // ³õÊ¼×´Ì¬ÎªÏ¨Ãð(¸ßµçÆ½)
  60   1        led_state = 0;
  61   1      
  62   1        while(1)
  63   1        {     
  64   2          // Ö÷Ñ­»·Áô¿Õ£¬Í¨¹ýÖÐ¶Ï´¦ÀíLED¿ØÖÆ          
  65   2        }   
  66   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    116    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      5    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
